# vim-gitgutter

ç”¨æ¥åœ¨ Vim ç¼–è¾‘å™¨çš„ gutter ä¸­å±•ç¤º git diffã€‚è¯¥æ’ä»¶ä¼šæ ‡è¯†å½“å‰è¡Œçš„æ“ä½œçŠ¶æ€ï¼ŒåŒ…æ‹¬æ·»åŠ (added)ã€ä¿®æ”¹(modified)å’Œåˆ é™¤(removed)ã€‚

æ•ˆæœï¼š

![](../images/vim-gitgutter/screeshot.png)

* 259 è¡Œï¼Œ<span style="color: #e4c54f;">`~`</span> è¡¨ç¤ºå½“å‰è¡Œè¢«ä¿®æ”¹äº†
* 262 è¡Œï¼Œ<span style="color: #f00;">`-`</span> è¡¨ç¤ºä¸‹é¢è¢«åˆ é™¤äº†ä¸€è¡Œ
* 269 è¡Œ - 282 è¡Œï¼Œ<span style="color: #0f0;">`+`</span> è¡¨ç¤ºè¿™äº›è¡Œä¸ºæ–°å¢

## ç‰¹ç‚¹

* é€è¡Œå±•ç¤º git diff
* å¼‚æ­¥è¿è¡Œ git diff
* ä¿è¯å®æ—¶æ›´æ–°æ ‡è¯†ç¬¦ï¼ˆ+/-/ï½ï¼‰
* ä¿®æ”¹çš„ä»£ç å—ä¹‹é—´å¯å¿«é€Ÿè·³è½¬
* å¯åˆ†åˆ«å¯¹ä»£ç å—æ‰§è¡Œ stage/undo/review ç­‰æ“ä½œ
* å¯ä¸ index æˆ–è€…å…¶ä»– commits ä¹‹é—´è¿›è¡Œ diff æ“ä½œ

...

è¿˜æœ‰å¾ˆå¤šç‰¹ç‚¹ä¸æƒ³å†™äº†ã€‚ã€‚ã€‚

## ç¼ºç‚¹

* åªæ”¯æŒ gitï¼Œä¸æ”¯æŒå…¶ä»–ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚å¦‚æœä½¿ç”¨å…¶ä»–ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå»ºè®®ä¿®æ”¹ä¸º git ç®¡ç† ï¼ˆå¤§è¯¯ï¼ŒğŸ˜‚ï¼›ä½¿ç”¨å…¶ä»–å·¥ä½œåšç‰ˆæœ¬ç®¡ç†çš„å°ä¼™ä¼´è¯·ä½¿ç”¨ [vim-signify](https://github.com/mhinz/vim-signify)ã€‚

## å®‰è£…

å»ºè®®ä½¿ç”¨ [vim-plug](./vim-plug.md) æ¥ç®¡ç†è¯¥æ’ä»¶ã€‚

åœ¨å®‰è£…ä¹‹å‰ï¼Œè¯·å…ˆæ£€æŸ¥å½“å‰ä½¿ç”¨çš„ Vim æ˜¯å¦æ”¯æŒ signs åŠŸèƒ½ï¼Œæ£€æµ‹æ–¹æ³•ä¸ºåœ¨æ‰“å¼€çš„ Vim ä¸­ï¼Œåœ¨å‘½ä»¤æ¨¡å¼ä¸­è¾“å…¥ï¼š

```vimscript
:echo has('signs')
```

å¦‚æœç»“æœä¸º `1`ï¼Œè¡¨ç¤ºå½“å‰ç‰ˆæœ¬æ”¯æŒ signs åŠŸèƒ½ï¼›å¦‚æœä¸º 0ï¼Œè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ä¸æ”¯æŒï¼Œåº”è¯¥å®‰è£…ä¸€ä¸ªæ›´é«˜ç‰ˆæœ¬çš„ Vim ç¼–è¾‘å™¨ã€‚

signs åŠŸèƒ½ä¸»è¦ç”¨æ¥åœ¨ Vim çš„ gutter(vim column) ä¸­æ ‡è¯†å½“å‰çš„è°ƒè¯•ã€ç‰ˆæœ¬ diff ç­‰çŠ¶æ€ï¼Œè¿™é‡Œä¸å±•å¼€ä»‹ç»ï¼Œæƒ³è¦äº†è§£æ›´å¤šçš„è¯·è·³è½¬ [Vim documentation: sign](http://vimdoc.sourceforge.net/htmldoc/sign.html)

## Getting started

### è®¾ç½® updatetime

Vim ä¸­çš„ updatetime ç”¨æ¥å®šä¹‰æ›´æ–°æ—¶é—´ï¼Œé»˜è®¤ä¸º 4000msï¼›è¿™æ ·ä¼šä½¿å¾—æ–‡ä»¶åœ¨ä¿®æ”¹ä¹‹åï¼Œdiff sign æ›´æ–°çš„ç‰¹åˆ«æ…¢ï¼Œæ‰€ä»¥å»ºè®®åœ¨ `.vimrc` ä¸­å°†æ­¤é€‰é¡¹çš„é»˜è®¤æ—¶é—´è®¾ç½®çš„å°ä¸€ç‚¹ï¼š

```vimscript
" set the default value of updatetime to 100ms
set updatetime=100
```

### æ¿€æ´»è®¾ç½®

å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ‡æ¢ vim-gitgutter çš„çŠ¶æ€ï¼š

```vimscript
:GitGutterDisable " ç¦ç”¨
:GitGutterEnable " å¼€å¯
:GitGutterToggle " åˆ‡æ¢
```

å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ‡æ¢ signs çš„çŠ¶æ€ï¼š

```vimscript
:GitGutterSignsEnable " å¼€å¯
:GitGutterSignsDisable " ç¦ç”¨
:GitGutterSignsToggle " åˆ‡æ¢
```

ä¸Šé¢çš„å‘½ä»¤æ¯”è¾ƒé•¿ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰å¿«æ·é”®æ¥æ˜ å°„ä¸Šé¢çš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š

```vimscript
" map <leader>ggd :GitGutterDisable " ç¦ç”¨ vim-gitgutter
" map <leader>gge :GitGutterEnable " å¼€å¯ vim-gitgutter
map <leader>ggt :GitGutterToggle " åˆ‡æ¢æ˜¯å¦å¼€å¯ vim-gitgutter
```

å¿«æ·é”®è¶Šå¤šï¼Œæˆ‘ä»¬éœ€è¦è®°å¿†çš„ä¸œè¥¿å°±è¶Šå¤šï¼Œä¼šå½¢æˆä¸å¿…è¦çš„è´Ÿæ‹…ã€‚å› æ­¤è¿™é‡Œæ¨èåªé…ç½®ä¸€ä¸ª toggle çš„å¿«æ·é”®ã€‚

### snappy

ä¸ºäº†ä¿æŒ Vim çš„ä¼˜é›…ç®€æ´ï¼Œå½“ä¸€ä¸ªæ–‡ä»¶çš„éœ€æ”¹è¶…è¿‡ 500 å¤„æ—¶ï¼Œvim-gitgutter ä¼šå…³é—­ diff signsï¼›å½“ä¿®æ”¹å°äº 500 å¤„æ—¶å†å±•ç¤ºã€‚å¦‚æœè¦ä¿®æ”¹è¯¥é…ç½®çš„é»˜è®¤å€¼ï¼Œå¯é€šè¿‡å¦‚ä¸‹é…ç½®ï¼š

```vimscript
let g:gitgutter_max_signs = 800
```

### Hunks

vim-gitgutter ä¼šå°†æ¯ä¸€å¤„ä¿®æ”¹æ ‡è®°ä¸ºä¸€ä¸ª **ä»£ç å—å¯¹è±¡**ï¼Œå¹¶ä¸”æä¾›äº†è·³è½¬ã€é¢„è§ˆã€æš‚å­˜å’Œæ’¤é”€çš„æ“ä½œã€‚vim-gitgutter å°†è¿™äº›ä»£ç å—å¯¹è±¡ç§°ä¸º **hunks**ã€‚

#### è·³è½¬

* `]c` è·³è½¬åˆ°ä¸‹ä¸€ä¸ª hunks
* `[c]` è·³è½¬åˆ°ä¸Šä¸€ä¸ª hunks

è‡ªå®šä¹‰å¿«æ·é”®ï¼š

```vimscript
nmap ]h <Plug>GitGutterNextHunk
nmap [h <Plug>GitGutterPrevHunk
```

#### æš‚å­˜ï¼ˆstageï¼‰/ æ’¤é”€ï¼ˆundoï¼‰/ é¢„è§ˆï¼ˆpreviewï¼‰

* `<Leader>hs` æš‚å­˜ï¼ˆstageï¼‰ç„¦ç‚¹æ‰€åœ¨çš„ hunk
* `<leader>hu` æ’¤é”€ï¼ˆundoï¼‰ç„¦ç‚¹æ‰€åœ¨çš„ hunk
* `<leader>hp` é¢„è§ˆï¼ˆpreviewï¼‰ç„¦ç‚¹æ‰€åœ¨çš„ hunk

è‡ªå®šä¹‰å¿«æ·é”®çš„æ–¹å¼å¦‚ä¸‹ï¼š

```vimscript
nmap <Leader>ha <Plug>GitGutterStageHunk
nmap <Leader>hr <Plug>GitGutterUndoHunk
nmap <Leader>hv <Plug>GitGutterPreviewHunk
```

## å…¶ä»–

é™¤ä»¥ä¸Šçš„ç‰¹æ€§å’Œé…ç½®ä¹‹å¤–ï¼Œvim-gitgutter è¿˜æä¾›äº†å…¶ä»–å¾ˆå¤šé…ç½®ï¼Œå…·ä½“è¯·å‚è€ƒ [vim-gitgutter#customition](https://github.com/airblade/vim-gitgutter#customisation) éƒ¨åˆ†ã€‚

ä½œè€…è‡ªå·±æ¯”è¾ƒå–œæ¬¢åŠŸèƒ½æœ€å°åŒ–ï¼Œå³ä¸€ä¸ªæ’ä»¶åªè¦æ»¡è¶³è‡ªå·±çš„éœ€æ±‚å³å¯ï¼Œå…¶ä»–æ›´é«˜çº§é…·ç‚«çš„åŠŸèƒ½ï¼Œå¯¹äºè‡ªå·±æ¥è¯´å¯èƒ½å¸®åŠ©æå‡æ•ˆç‡çš„ç©ºé—´ä¸å¤§ï¼Œåè€Œæœ‰å¯èƒ½ä¼šæ¶ˆè€—æ›´å¤šçš„æ€§èƒ½ã€‚ä½œè€…æ„Ÿè§‰ä¸Šé¢è¿™äº›åŠŸèƒ½å·²ç»æ»¡è¶³äº†ä½œè€…å¯¹äº git diff ç›¸å…³æ“ä½œçš„éœ€è¦ï¼Œå…¶ä»–å„ç§é¢œè‰²é…ç½®ã€é«˜äº®å’Œæç¤ºç¬¦æ›´æ”¹å·²ç»è¶…å‡ºäº†æˆ‘å¯¹è¿™äº›æ“ä½œçš„éœ€è¦ï¼Œå› æ­¤ä¸å†åšæ›´å¤šçš„ä»‹ç»ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œå„ä½å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œé˜…è¯» vim-gitgutter çš„ README è¿›è¡Œé…ç½®ã€‚

## Author Info ğŸ¦‹

* [GitHub](https://github.com/Tao-Quixote)
* Email: <web.taox@gmail.com>